<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Friendship Result üíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
body{
  min-height:100vh;
  background:radial-gradient(circle at top,#3a004d,#000);
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

.card{
  max-width:520px;
  width:92%;
  background:rgba(255,255,255,.08);
  padding:26px 20px;
  border-radius:26px;
  text-align:center;
  box-shadow:0 0 45px rgba(255,95,191,.5);
}

h1{
  color:#ff5fbf;
  text-shadow:0 0 18px #ff5fbf;
}

.bigHeart{
  font-size:80px;
  animation:beat 1.2s infinite;
  margin:10px 0;
}
@keyframes beat{
  0%{transform:scale(1)}
  50%{transform:scale(1.25)}
  100%{transform:scale(1)}
}

.score{
  font-size:20px;
  margin-top:6px;
}
.score span{
  color:#ff5fbf;
  font-weight:700;
}

.percent{
  font-size:44px;
  margin:10px 0 14px;
  font-weight:700;
  text-shadow:0 0 15px #ff5fbf;
}

.quote{
  font-size:18px;
  color:#ffdfff;
  margin-bottom:20px;
  text-shadow:0 0 18px rgba(255,95,191,.6);
}

.buttons{display:flex;gap:14px;justify-content:center}
button{
  padding:10px 22px;
  border-radius:24px;
  font-weight:600;
  border:none;
  cursor:pointer;
}
.play{background:#ff5fbf;color:#000}
.home{background:transparent;border:2px solid #ff5fbf;color:#ff5fbf}
.home:hover{background:#ff5fbf;color:#000}

.heart{
  position:fixed;
  bottom:-30px;
  font-size:22px;
  color:#ff5fbf;
  animation:floatUp linear infinite;
  opacity:.9;
}
@keyframes floatUp{
  from{transform:translateY(0);opacity:1}
  to{transform:translateY(-120vh);opacity:0}
}
</style>
</head>

<body>

<div class="card">

  <h1>Your Friendship Result üíñ</h1>

  <div class="bigHeart">‚ù§Ô∏è</div>

  <div class="score">
    Score : <span id="score">0</span> / 10
  </div>

  <div class="percent" id="percent">0%</div>

  <div class="quote" id="quote">Loading...</div>

  <div class="buttons">
    <button class="play" onclick="playAgain()">Play Again</button>
    <button class="home" onclick="goHome()">Home</button>
  </div>

</div>

<script>
// ---------- READ PLAYER ANSWERS ----------
let p1 = JSON.parse(localStorage.getItem("p1Answers")) || [];
let p2 = JSON.parse(localStorage.getItem("p2Answers")) || [];

let total = 10;
let score = 0;

// ---------- COMPARE ----------
for(let i=0;i<total;i++){
   if(p1[i] == p2[i]) score++;
}

// ---------- PERCENT ----------
let percent = Math.round((score / total) * 100);

// ---------- SHOW ----------
document.getElementById("score").innerText = score;
document.getElementById("percent").innerText = percent + "%";

// ---------- QUOTES ----------
const quotes=[
"Vibes speak louder than words ü§ô‚ú®",
"Soul clicks ‚Äî not just pics üíõ",
"Besties are pure magic üéâ",
"We don‚Äôt talk ‚Äî we connect üí´",
"Chaos turns to glitter ‚ú®",
"Heart talks louder üíå",
"Friendship is the real flex üòé",
"We glow together üåü",
"Soul friends exist üíñ",
"Even silence speaks üåà"
];
document.getElementById("quote").innerText =
quotes[Math.floor(Math.random()*quotes.length)];

// ---------- BUTTONS ----------
function playAgain(){
   localStorage.clear();
   window.location.href="lobby.html";
}
function goHome(){
   localStorage.clear();
   window.location.href="index.html";
}

// ---------- HEARTS ----------
for(let i=0;i<25;i++){
 let h=document.createElement("div");
 h.className="heart";
 h.innerHTML="‚ù§";
 h.style.left=Math.random()*100+"vw";
 h.style.animationDuration=4+Math.random()*6+"s";
 document.body.appendChild(h);
}
import { getDatabase, ref, update } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

const store = getDatabase();

function updateScore(code, player, score){
   update(ref(store, `rooms/${code}/${player}`),{
      score: score
   });
}
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

const db = getDatabase();

async function loadScores(code){
   const snap = await get(ref(db, "rooms/" + code));

   if(snap.exists()){
      const data = snap.val();

      const s1 = data.p1.score || 0;
      const s2 = data.p2.score || 0;

      document.getElementById("p1score").innerText = s1;
      document.getElementById("p2score").innerText = s2;

      showResult(s1,s2);
   }
}

function showResult(s1,s2){
   let msg="";

   if(s1 > s2) msg="Player 1 Wins üéâ";
   else if(s2 > s1) msg="Player 2 Wins üèÜ";
   else msg="Match Draw ü§ù";

   document.getElementById("result").innerText = msg;
}

</script>

</body>
</html>
